<div class="chat-container">
  <div class="sidebar">
    <div>
      <strong>Maths Chapters ICSE<br />10th Std)</strong>
    </div>

    <div
      *ngFor="let chapter of chapters"
      (click)="selectChapter(chapter)"
      [class.active]="selectedChapter === chapter"
    >
      >> {{ chapter }}
    </div>

    <div class="upload-section">
      <label>Upload Chapter File:</label><br />
      <input
        type="file"
        (change)="onFileSelected($event)"
        accept=".pdf,.docx,image/*"
      />
      <div *ngIf="uploadedFiles[selectedChapter]" class="uploaded-status">
        ✔️ Uploaded
      </div>
    </div>
  </div>

  <div class="chat-box">
    <div class="chat-messages">
      <div *ngIf="messages.length === 0" class="placeholder">
        On this part the response will come in proper formatting similar to
        <b>chatgpt</b>
      </div>
      <div
        *ngFor="let msg of messages"
        [class.user]="msg.role === 'user'"
        [class.ai]="msg.role === 'ai'"
      >
        <b>{{ msg.role === "user" ? "You" : "AI" }}:</b> {{ msg.text }}
      </div>
    </div>

    <div class="chat-input-bar">
      <input
        [(ngModel)]="userInput"
        (keydown)="handleEnter($event)"
        placeholder="Ask anything"
      />
      <button (click)="sendMessage()">▶</button>
    </div>

    <div class="upload-question">
      <label>📷 Upload Question Image:</label>
      <input
        type="file"
        (change)="onQuestionImageSelected($event)"
        accept="image/*"
      />
      <div *ngIf="selectedQuestionImage" class="uploaded-status">
        ✔️ {{ selectedQuestionImage.name }}
      </div>
    </div>
  </div>
</div>
